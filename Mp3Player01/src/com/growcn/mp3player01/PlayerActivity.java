package com.growcn.mp3player01;import java.io.File;import com.growcn.mp3player01.model.Mp3Info;import com.growcn.mp3player01.service.DownloadService;import com.growcn.mp3player01.service.PlayerService;import android.app.Activity;import android.view.View;import android.view.View.OnClickListener;import android.content.Intent;import android.media.MediaPlayer;import android.net.Uri;import android.os.Bundle;import android.os.Environment;import android.util.Log;import android.widget.ImageButton;public class PlayerActivity extends Activity implements Definition {	Mp3Info mp3Info = null;	ImageButton startButton = null;	ImageButton pauseButton = null;	ImageButton stopButton = null;	private Boolean isPlaying = false;	private Boolean isPause = false;	private Boolean isReleased = false;	    private MediaPlayer mediaPlayer=null;		@Override	protected void onCreate(Bundle savedInstanceState) {		super.onCreate(savedInstanceState);		setContentView(R.layout.player);		Intent intent = getIntent();		mp3Info = (Mp3Info) intent.getSerializableExtra("mp3Info");		// Log.i(TAG, "Player-------" + mp3Info);		startButton = (ImageButton) findViewById(R.id.start);		pauseButton = (ImageButton) findViewById(R.id.pause);		stopButton = (ImageButton) findViewById(R.id.stop);		startButton.setOnClickListener(new StartButtonListener());		pauseButton.setOnClickListener(new PauseButtonListener());		stopButton.setOnClickListener(new StopButtonListener());	}	class StartButtonListener implements OnClickListener {		@Override		public void onClick(View arg0) {			Log.i(TAG, "Player-------StartButtonListener" + mp3Info);			Intent intent = new Intent();			intent.setClass(PlayerActivity.this, PlayerService.class);									intent.putExtra("mp3Info", mp3Info);			intent.putExtra("MSG", AppConstant.PlayerMsg.PLAY_MSG);			startService(intent);							//			if(!isPlaying){//				String path = getMp3Path(mp3Info);//				mediaPlayer = MediaPlayer.create(PlayerActivity.this, Uri.parse("file://"+path));//				mediaPlayer.setLooping(false);//				mediaPlayer.start();//				isPlaying = true;//				isReleased = false;//			}										}	}		class PauseButtonListener implements OnClickListener {		@Override		public void onClick(View arg0) {			Intent intent = new Intent();			intent.putExtra("MSG", AppConstant.PlayerMsg.PAUSE_MSG);			intent.setClass(PlayerActivity.this, PlayerService.class);						startService(intent);						//			if(mediaPlayer!=null){ //				if(!isPause){//					mediaPlayer.pause();//					isPause = true;//					isPlaying = true;//				}else{//					mediaPlayer.start();//					isPause = false;//				}				//			}		}	}			class StopButtonListener implements OnClickListener {		@Override		public void onClick(View arg0) {			Intent intent = new Intent();			intent.putExtra("MSG", AppConstant.PlayerMsg.STOP_MSG);			intent.setClass(PlayerActivity.this, PlayerService.class);						startService(intent);				//			if(mediaPlayer!=null){ //				if(!isPlaying){//					if(!isReleased){//						mediaPlayer.stop();//						mediaPlayer.release();//						isReleased = true;//					}//					isPlaying = false;//					//				}				//			}		}	}			//	private String getMp3Path(Mp3Info mp3Info) {//		String SDCardRoot = Environment.getExternalStorageDirectory().getAbsolutePath();//		String path = SDCardRoot + File.separator+ MY_ROOT+ File.separator + mp3Info.getMp3Name();//		return path;//	}	}